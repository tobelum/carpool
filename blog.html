<!DOCTYPE html>
<!--[if IE 7]>                  <html class="ie7 no-js" lang="en">     <![endif]-->
<!--[if lte IE 8]>              <html class="ie8 no-js" lang="en">     <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="not-ie no-js" lang="en">  <!--<![endif]-->
    <head>

        <!-- Basic Page Needs -->
        <meta charset="utf-8">
        <title>Share My ride - Rides</title>
        <meta name="description" content="">
        <meta name="author" content="">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <!-- Mobile Specific Metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Styles -->

        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <!-- Forms -->
        <link href="css/jquery.idealforms.css" rel="stylesheet">
        <!-- Select  -->
        <link href="css/jquery.idealselect.css" rel="stylesheet">
        <!-- Slicknav  -->
        <link href="css/slicknav.css" rel="stylesheet">
        <!-- Main style -->
        <link href="css/style.css" rel="stylesheet">

        <!-- Modernizr -->
        <script src="js/modernizr.js"></script>

        <!-- Fonts -->
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

        <script>

                function addNewsComplete(xhr, status){
                //alert("status is" + status);

                if(status!="success"){
                    alert("status is "+status);
                    spanSignup.innerHTML="News was not created";
                    return;
                }
                
                var obj= $.parseJSON(xhr.responseText);
                
                //alert("hey");
                if(obj.result==0){
                    alert("server response: "+obj.message);
                    
                    spanSignup.innerHTML=obj.message;
                    console.log(obj.message);
                }else{
                    alert("Yaay, you have shared your news.");
                    window.location="blog.html";
                    
                }
            }

           function addNews(){
                firstname=$("#firstname").val();
                lastname=$("#lastname").val();
                title=$("#title").val();
                eventdate=$("#eventdate").val();
                eventtime=$("#eventtime").val();
                place=$("#place").val();
                blogtext=$("#blogtext").val();

                pageUrl="http://52.89.116.249/~tobel.eze-okoli/carpool/userajax.php?cmd=9&firstname="+firstname+"&lastname="+lastname+"&title="+title+"&eventdate="+eventdate+"&eventtime="+eventtime+"&place="+place+"&blogtext="+blogtext;
                $.ajax(pageUrl,{async:true,complete:addNewsComplete});
                alert("Please wait for a moment while we are updating your newsfeed.");
                //prompt('url',pageUrl);
           }
            function viewNewsComplete(xhr, status){
                //alert("status is" + status);

                if(status!="success"){
                    alert("status is "+status);
                    alert("News could not be displayed");
                    return;
                }
                
                var obj= $.parseJSON(xhr.responseText);
                
                //alert("hey");
                if(obj.result==0){
                    alert("server response: "+obj.message);
                    
                    spanSignup.innerHTML=obj.message;
                    console.log(obj.message);
                }else{   
              var result="";
              
              var length=obj.pool.length;

              while(length>0){
                //alert("there");
                  
                    //alert(length);                   
                    result+="<article class='article clearfix'><figure class='ride-image'><img src='img/events/event-2.jpg' alt=""/></figure><header><h3 class='article-title'>"+obj.pool[length-1].title+"</h3><ul class='article-meta'>toggle='tooltip'><i class='fa fa-calendar'></i>"+obj.pool[length-1].eventdate+" at "+obj.pool[length-1].eventtime+"</a></li><li class='article-author'><a href='#' class='tooltip-link' data-original-title='Post by' data-toggle='tooltip'><i class='fa fa-user'></i>"+obj.pool[length-1].firstname+" "+obj.pool[length-1].lastname+"</a></li><li class='article-tag'><a href='#'class='tooltip-link' data-original-title='Category' data-toggle='tooltip'><i class='fa fa-tags'></i>"+obj.pool[length-1].place+"</a></li></ul></header><div class='article-content'><p>"+obj.pool[length-1].blogtext+"</p><a class='btn green-color pull-right' href='#'>Read more...</a></div></article>";

                 // window.location.href="#joinpool";

           //     }

                length-=1;
                //alert("see");
              }
             
              joinRide.innerHTML=result;
                    
            }
         }

           function viewNews(){
                //alert("here");
                pageUrl="http://52.89.116.249/~tobel.eze-okoli/carpool/userajax.php?cmd=10";
                $.ajax(pageUrl,{async:true,complete:viewNewsComplete});
                alert("Please wait a moment while we load your newsfeed.");
                //prompt('url',pageUrl);
           }
        </script>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <header class="header">

            <div class="top-menu">

                <section class="container">
                    <div class="row">

                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <div class="user-log">

                                <a> Welcome to your Share My Ride profile
                                </a>

                            </div><!-- end .user-log -->
                        </div><!-- end .col-sm-4 -->

                    </div><!-- end .row -->
                </section><!-- end .container -->

            </div><!-- end .top-menu -->

            <div class="main-baner">

                <div class="background parallax clearfix" style="background-image:url('img/tumblr_n7yhhvUQtx1st5lhmo1_1280.jpg');" data-img-width="1600" data-img-height="1064">

                    <div class="main-parallax-content">

                        <div class="second-parallax-content">

                            <section class="container">

                                <div class="row">

                                    <div class="main-header-container clearfix">

                                        <div class="col-md-4 col-sm-12 col-xs-12">

                                            <div class="logo">
                                                <h1>Share My ride</h1>
                                            </div><!-- end .logo -->

                                        </div><!-- end .col-sm-4 -->

                                        <div class="col-md-8 col-sm-8 col-xs-12">

                                            <nav id="nav" class="main-navigation">

                                                <ul class="navigation">
                                                    <li>
                                                        <a href="index.html">Log Out</a>
                                                    </li>
                                                    <li>
                                                        <a href="rides.html">Join a ride</a>
                                                    </li>
                                                    <li>
                                                        <a href="add-ride.html">Share your ride</a>
                                                    </li>
                                                    <li>
                                                        <a href="viewrides.html">View Report</a>
                                                    </li>
                                                    <li>
                                                        <a href="blog.html">Newsfeed</a>
                                                    </li>
                                                </ul>

                                            </nav><!-- end .main-navigation -->

                                        </div><!-- end .col-md-8 -->

                                    </div><!-- end .main-header-container -->

                                </div><!-- end .row -->

                            </section><!-- end .container -->

                        </div><!-- end .second-parallax-content -->

                    </div><!-- end .main-parallax-content -->

                </div><!-- end .background .parallax -->

            </div><!-- end .main-baner -->

        </header><!-- end .header -->

        <section class="main-content">

            <div class="container">
                <div id="joinRide"><div>
                <div class="row">
                        <div class="col-sm-12 col-md-12 col-xs-12">

                        <div class="page-content add-new-ride">

                            <form action="" novalidate autocomplete="off" class="idealforms add-ride">

                            <div class="field">
                                <input id="firstname" type="text" placeholder="First Name">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input type="text" id="lastname" placeholder="Last Name">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input id="title" type="text" placeholder="Title">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input type="date" id="eventdate" placeholder="Date">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input id="eventtime" type="time" placeholder="Time">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input type="text" id="place" placeholder="Location">
                                <span class="error"></span>
                            </div>

                            <div class="field">
                                <input id="blogtext" type="text" placeholder="News">
                                <span class="error"></span>
                            </div>

                                <div class="field buttons">
                                    <button type="submit" class="btn btn-lg green-color" onclick="addNews()">Submit</button>
                                </div>

                            </form>

                        </div><!-- end .page-content -->

                    </div><!-- end .col-sm-12 -->

                    <div class="col-md-12 col-sm-12 col-xs-12">

                        <div class="page-sub-title textcenter">
                            <h2>Newsfeed</h2>
                            <div class="line"></div>
                        </div><!-- end .page-sub-title -->

                    </div><!-- end .col-md-12 col-sm-12 col-xs-12 -->

                    <div class="col-md-12 col-sm-12 col-xs-12">

                        <div class="page-content">

                            <div class="rides-list">
                                <div id= "joinRides"></div>


                                <div class="clearfix"></div>
                                    <div class="field buttons">
                                        <button type="submit" class="btn btn-lg green-color" onclick="viewNews()">View All News</button>
                                    </div>

                                <div class="post-pagination pagination-margin clearfix">

                                    <div class="next pull-right">
                                        <a href="#">
                                            Next
                                            <i class="fa fa-chevron-right"></i>
                                        </a>
                                    </div>

                                </div><!-- end .post-pagination -->

                            </div><!-- end .events-list -->

                        </div><!-- end .page-content -->

                    </div><!-- end .col-md-12 col-sm-12 col-xs-12 -->

                </div><!-- end .row -->
            </div><!-- end .container -->

        </section><!-- end .main-content -->

        <footer id="footer">

            <div class="footer-copyright">

                <div class="container">
                    <div class="row">

                        <div class="col-md-12 col-sm-12 col-xs-12">
                            Copyright by Share My ride
                        </div>

                    </div><!-- end .row -->
                </div><!-- end .container -->

            </div><!-- end .footer-copyright -->

        </footer><!-- end #footer -->

        <!-- Javascript -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Bootstrap -->
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <!-- Main jQuery -->
        <script type="text/javascript" src="js/jquery.main.js"></script>
        <!-- Form -->
        <script type="text/javascript" src="js/jquery.idealforms.min.js"></script>
        <script type="text/javascript" src="js/jquery.idealselect.min.js"></script>
        
        <!-- Menu -->
        <script type="text/javascript" src="js/hoverIntent.js"></script>
        <script type="text/javascript" src="js/superfish.js"></script>
        <!-- Counter-Up  -->
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
        <script type="text/javascript" src="js/jquery.counterup.min.js"></script>
        <!-- Rating  -->
        
        <!-- Slicknav  -->
        <script type="text/javascript" src="js/jquery.slicknav.min.js"></script>

    </body>
</html>
